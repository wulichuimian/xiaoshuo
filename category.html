<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>小说阅读</title>
		<link rel="stylesheet" type="text/css" href="css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="stylesheet" type="text/css" href="css/category.css" />
		<script src="js/jquery-1.11.2.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="./js/index.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>
		<script type="text/javascript">
			window.onload = function() {
				//创建头部
				header();
				//创建导航栏
				nev();
				//创建尾部
				footer();
				//创建分类内容
				category("男生分类");
				category("女生分类");
				category("出版分类");
				let oCategory = document.querySelectorAll(".category");
				for (let i = 0; i < oCategory.length; i++) {
					for (let j = 0; j < oCategory[i].children[0].children.length; j++) {
						oCategory[i].children[0].children[j].onclick = function(){
							// console.log(this.children[1].children[0].innerHTML);
							window.location.href = `fantasyBook.html?classification=${this.children[1].children[0].innerHTML}`;
						}
					}
				}
			}

			function category(category) {
				$.ajaxSettings.async = false;
				$.ajax({
					method: "post",
					url: "category.php",
					data: {
						category: category
					},
					// asynch:false,
					success: function(resul) {
						let obj = JSON.parse(resul);
						section(category, obj);
						console.log(obj);
					},
					error: function(mag) {
						console.log(mag);
					}
				});
				$.ajaxSettings.async = true;
			}
		</script>
		<header id="header"></header>
		<div class="nev" id="nev"></div>
		<article id="article">

		</article>
		<footer id="footer"></footer>
	</body>
</html>
