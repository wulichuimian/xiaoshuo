<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>小说阅读</title>
		<link rel="stylesheet" type="text/css" href="css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="css/index.css" />
		<link rel="stylesheet" type="text/css" href="css/category.css" />
		<link rel="stylesheet" type="text/css" href="css/login.css">
		<script src="js/jquery-1.11.2.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="./js/index.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/valueAndName.js" type="text/javascript" charset="utf-8"></script>
		<style type="text/css">
			article{
				padding: 0;
			}
			.fill{
				padding-top: 30px;
				height: 50vh;
				text-align: center !important;
			}
		</style>
	</head>
	<body>
		<script type="text/javascript">
			window.onload = function(){
				//给头部两个按钮设置点击事件；
				button1();
				//创建尾部
				footer();
				//设置头部名称
				let title = document.querySelector("header").children[1];
				let search = window.location.search;
				let classification = valueAndName(search,"classification");
				title.innerHTML = decodeURIComponent(classification);
				
				let art = document.querySelector("article");
				//插入符合条件的书籍
				$ajax({
					method: "post",
					url: "fantasyBook.php",
					data:{
						classification:classification
					},
					success: function(resul) {
						var arr = JSON.parse(resul);
						
						art.innerHTML += `<div class="ious"><div>`;
						if(arr.length == 0){
							art.innerHTML += "<div class='fill'>暂无这类书籍<div>";
						}else{
							for (let i = 0; i < arr.length; i++) {
								art.innerHTML += `<section class="select-text">
										<ul>
											<li>
												<img src=${arr[i].imgUrl} loading='lazy'>
												<div class='text'>
													<h2>
														<a href="booksIntroduce.html?id=${arr[i].id}">${arr[i].title}</a>
													</h2>
													<p>${arr[i].Introduction}</p>
												</div>
												<div class="idNone">${arr[i].id}</div>
											</li>
										</ul>
									</section>`;
							}
						}
						art.innerHTML += `<div class="ious"><div>`;
					},
					error: function(mag) {
						console.log(mag);
					}
				});
			}
		</script>
		<header>
			<div class="return">&#xe620;</div>
			<div id=""></div>
			<div class="home">&#xe649;</div>
		</header>
		<div class="nev"></div>
		<article></article>
		<footer></footer>
	</body>
</html>
